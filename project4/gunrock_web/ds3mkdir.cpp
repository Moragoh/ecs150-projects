#include <iostream>
#include <string>
#include <vector>

#include "LocalFileSystem.h"
#include "Disk.h"
#include "ufs.h"

using namespace std;

int main(int argc, char *argv[])
{
  if (argc != 4)
  {
    cerr << argv[0] << ": diskImageFile parentInode directory" << endl;
    cerr << "For example:" << endl;
    cerr << "    $ " << argv[0] << " a.img 0 a" << endl;
    return 1;
  }

  // Parse command line arguments
  Disk *disk = new Disk(argv[1], UFS_BLOCK_SIZE);
  LocalFileSystem *fileSystem = new LocalFileSystem(disk);
  // int parentInode = stoi(argv[2]);
  string directory = string(argv[3]);
  const char shortBuffer[] = "Monterey";
  // const char buffer[] = "Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.Cannery Row in Monterey in California is a poem, a stink, a grating noise, a quality of light, a tone, a habit, a nostalgia, a dream.Cannery Row is the gathered and scattered, tin and iron and rust and splintered wood, chipped pavement and weedy lots and junk heaps, sardine canneries of corrugated iron, honky tonks, restaurants and whore houses, and little crowded groceries, and laboratories and flophouses.Its inhabitant are, as the man once said,whores, pimps, gambler and sons of bitches, by which he meant Everybody.Had the man looked through another peephole he might have said, Saints and angels and martyrs and holymen and he would have meant the same thing.";
  // Writing less than works, but writing more does not?
  // fileSystem->write(3, buffer, 100000000);
  fileSystem->write(3, shortBuffer, sizeof(shortBuffer));

  // Test inode region writing
  // Prepares inodes with the wanted changed for that specific inode and writes it back using writeBlock

  // Call ds3bits to check it out

  delete disk;
  delete fileSystem;

  return 0;
}
